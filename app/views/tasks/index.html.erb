<% if current_user %>
    <section class="content" data-controller="search">

        <h1>Your Tasks</h1>

          <input type="text" id="search" placeholder="Search..."
          data-action="input->search#filterTasks"/>

        <%= form_with url: tasks_path, method: :get, local: true do %>
          <%= select_tag :priority,
              options_for_select(
                [
                  ["All Priorities", ""],
                  ["Due Soon", "due_soon"]
                ] + @priorities.map { |p| ["Priority #{p}", p] },
                params[:priority]
              ),
              onchange: 'this.form.submit();',
              class: "form-select mb-4" %>
        <% end %>

<%= button_to "New Task", new_task_path, method: :get, class: "mb-4 btn btn-primary new-task-color" %>

      <%= render "tasks", tasks: @tasks, completed_tasks: @completed_tasks %>

      <h3 class="d-none text-red" id="no-results">No results</h>
    </section>
  <hr>

  <%else %>
    <h1> Please Sign In </h1>

    <h5> Don't have an account? <%= link_to "Sign Up! :D", signup_path %> </h5>

    <%= form_with(url: session_path) do |f| %>

      <%= f.label :email_or_username %>
      <%= f.text_field :email_or_username, placeholder: 'Please enter your email or username', autofocus: true, required: true %>

      <%= f.label :password %>
      <%= f.password_field :password, required: true %>

      <%= f.submit "Sign In" %>

    <% end %>


<% end %>
